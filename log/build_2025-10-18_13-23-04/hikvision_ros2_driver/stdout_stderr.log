[ 50%] Built target hikvision_ros2_driver_node
[ 75%] [32mBuilding CXX object CMakeFiles/hikvision_ros2_driver.dir/src/hikvision_ros2_driver.cpp.o[0m
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:23:9:[m[K [01;31m[Kerror: [m[Kexpected unqualified-id before ‘[01m[Kif[m[K’
   23 |         [01;31m[Kif[m[K (compactness < 0.3) continue; // 紧密度筛选
      |         [01;31m[K^~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:24:9:[m[K [01;31m[Kerror: [m[K‘[01m[Kvalid_rects[m[K’ does not name a type
   24 |         [01;31m[Kvalid_rects[m[K.push_back(min_rect);
      |         [01;31m[K^~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:25:5:[m[K [01;31m[Kerror: [m[Kexpected declaration before ‘[01m[K}[m[K’ token
   25 |     [01;31m[K}[m[K
      |     [01;31m[K^[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:33:5:[m[K [01;31m[Kerror: [m[Kexpected unqualified-id before ‘[01m[Kif[m[K’
   33 |     [01;31m[Kif[m[K (valid_rects.size() >= 2) {
      |     [01;31m[K^~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:98:5:[m[K [01;31m[Kerror: [m[Kexpected unqualified-id before ‘[01m[Ktry[m[K’
   98 |     [01;31m[Ktry[m[K {
      |     [01;31m[K^~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:119:7:[m[K [01;31m[Kerror: [m[Kexpected unqualified-id before ‘[01m[Kcatch[m[K’
  119 |     } [01;31m[Kcatch[m[K (const std::exception &e) {
      |       [01;31m[K^~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:125:5:[m[K [01;31m[Kerror: [m[K‘[01m[Kdetections_msg[m[K’ does not name a type
  125 |     [01;31m[Kdetections_msg[m[K->header = msg->header; // 使用原始图像的时间戳和 frame_id
      |     [01;31m[K^~~~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:127:5:[m[K [01;31m[Kerror: [m[Kexpected unqualified-id before ‘[01m[Kif[m[K’
  127 |     [01;31m[Kif[m[K (armor_found) {
      |     [01;31m[K^~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:159:5:[m[K [01;31m[Kerror: [m[K‘[01m[KpImpl[m[K’ does not name a type
  159 |     [01;31m[KpImpl[m[K->p_armor_detections_pub->publish(std::move(detections_msg));
      |     [01;31m[K^~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:162:1:[m[K [01;31m[Kerror: [m[Kexpected declaration before ‘[01m[K}[m[K’ token
  162 | [01;31m[K}[m[K
      | [01;31m[K^[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:164:6:[m[K [01;31m[Kerror: [m[K‘[01m[KHikvisionDriver[m[K’ has not been declared
  164 | void [01;31m[KHikvisionDriver[m[K::Impl::image_callback_ex(unsigned char *pData, MV_FRAME_OUT_INFO_EX *pFrameInfo, void *pUser) {
      |      [01;31m[K^~~~~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:[m[K In function ‘[01m[Kvoid[01;32m[K image_callback_ex[m[K(unsigned char*, MV_FRAME_OUT_INFO_EX*, void*)[m[K’:
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:165:34:[m[K [01;31m[Kerror: [m[K‘[01m[KHikvisionDriver[m[K’ does not name a type
  165 |     auto node = reinterpret_cast<[01;31m[KHikvisionDriver[m[K *>(pUser);
      |                                  [01;31m[K^~~~~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:165:50:[m[K [01;31m[Kerror: [m[Kexpected ‘[01m[K>[m[K’ before ‘[01m[K*[m[K’ token
  165 |     auto node = reinterpret_cast<HikvisionDriver [01;31m[K*[m[K>(pUser);
      |                                                  [01;31m[K^[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:165:50:[m[K [01;31m[Kerror: [m[Kexpected ‘[01m[K([m[K’ before ‘[01m[K*[m[K’ token
  165 |     auto node = reinterpret_cast<HikvisionDriver [01;31m[K*[m[K>(pUser);
      |                                                  [01;31m[K^[m[K
      |                                                  [32m[K([m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:165:51:[m[K [01;31m[Kerror: [m[Kexpected primary-expression before ‘[01m[K>[m[K’ token
  165 |     auto node = reinterpret_cast<HikvisionDriver *[01;31m[K>[m[K(pUser);
      |                                                   [01;31m[K^[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:165:59:[m[K [01;31m[Kerror: [m[Kexpected ‘[01m[K)[m[K’ before ‘[01m[K;[m[K’ token
  165 |     auto node = reinterpret_cast<HikvisionDriver *>(pUser)[01;31m[K;[m[K
      |                                                           [01;31m[K^[m[K
      |                                                           [32m[K)[m[K
In file included from [01m[K/opt/ros/jazzy/include/rclcpp/rclcpp/copy_all_parameter_values.hpp:27[m[K,
                 from [01m[K/opt/ros/jazzy/include/rclcpp/rclcpp/rclcpp.hpp:171[m[K,
                 from [01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:4[m[K:
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:175:9:[m[K [01;31m[Kerror: [m[Ktemplate argument 1 is invalid
  175 |         [01;31m[KRCLCPP_ERROR_ONCE[m[K(node->get_logger(), "image bytes exceed max available size for sensor_msgs::msg::Image");
      |         [01;31m[K^~~~~~~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:206:9:[m[K [01;31m[Kerror: [m[Ktemplate argument 1 is invalid
  206 |         [01;31m[KRCLCPP_ERROR_ONCE[m[K(node->get_logger(), "unsupport pixel format for sensor_msgs::msg::Image: %d", (int)pFrameInfo->enPixelType);
      |         [01;31m[K^~~~~~~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:211:9:[m[K [01;31m[Kerror: [m[Ktemplate argument 1 is invalid
  211 |         [01;31m[KRCLCPP_ERROR[m[K(node->get_logger(), "nFrameLen < data.size() for sensor_msgs::msg::Image, len=%d", pFrameInfo->nFrameLen);
      |         [01;31m[K^~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:[m[K At global scope:
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:239:1:[m[K [01;31m[Kerror: [m[K‘[01m[KHikvisionDriver[m[K’ does not name a type
  239 | [01;31m[KHikvisionDriver[m[K::HikvisionDriver(const rclcpp::NodeOptions &options)
      | [01;31m[K^~~~~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:466:1:[m[K [01;31m[Kerror: [m[K‘[01m[KHikvisionDriver[m[K’ does not name a type
  466 | [01;31m[KHikvisionDriver[m[K::~HikvisionDriver() {
      | [01;31m[K^~~~~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:477:1:[m[K [01;31m[Kerror: [m[Kexpected declaration before ‘[01m[K}[m[K’ token
  477 | [01;31m[K}[m[K  // namespace hikvision_ros2_driver
      | [01;31m[K^[m[K
In file included from [01m[K/opt/ros/jazzy/include/class_loader/class_loader/class_loader.hpp:56[m[K,
                 from [01m[K/opt/ros/jazzy/include/rclcpp_components/rclcpp_components/register_node_macro.hpp:18[m[K,
                 from [01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:479[m[K:
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:480:33:[m[K [01;31m[Kerror: [m[K‘[01m[Khikvision_ros2_driver[m[K’ was not declared in this scope; did you mean ‘[01m[Khikvision_ros2_driver_EXPORTS[m[K’?
  480 | RCLCPP_COMPONENTS_REGISTER_NODE([01;31m[Khikvision_ros2_driver[m[K::HikvisionDriver);
      |                                 [01;31m[K^~~~~~~~~~~~~~~~~~~~~[m[K
[01m[K/home/daizhijun/RobotMaster/hikvision_ros2_integration/hikvision_ros2_driver/src/hikvision_ros2_driver.cpp:480:1:[m[K [01;31m[Kerror: [m[Ktemplate argument 1 is invalid
  480 | [01;31m[KRCLCPP_COMPONENTS_REGISTER_NODE[m[K(hikvision_ros2_driver::HikvisionDriver);
      | [01;31m[K^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[m[K
In file included from [01m[K/opt/ros/jazzy/include/class_loader/class_loader/class_loader_core.hpp:58[m[K,
                 from [01m[K/opt/ros/jazzy/include/class_loader/class_loader/class_loader.hpp:55[m[K:
/opt/ros/jazzy/include/class_loader/class_loader/meta_object.hpp: In instantiation of ‘[01m[KB* class_loader::impl::MetaObject<C, B>::[01;32m[Kcreate[m[K() const [35m[K[with C = int; B = rclcpp_components::NodeFactory][m[K[m[K’:
[01m[K/opt/ros/jazzy/include/class_loader/class_loader/meta_object.hpp:216:7:[m[K   required from here
[01m[K/opt/ros/jazzy/include/class_loader/class_loader/meta_object.hpp:218:12:[m[K [01;31m[Kerror: [m[Kcannot convert ‘[01m[Kint*[m[K’ to ‘[01m[Krclcpp_components::NodeFactory*[m[K’ in return
  218 |     return [01;31m[Knew C[m[K;
      |            [01;31m[K^~~~~[m[K
      |            [01;31m[K|[m[K
      |            [01;31m[Kint*[m[K
gmake[2]: *** [CMakeFiles/hikvision_ros2_driver.dir/build.make:76: CMakeFiles/hikvision_ros2_driver.dir/src/hikvision_ros2_driver.cpp.o] Error 1
gmake[1]: *** [CMakeFiles/Makefile2:139: CMakeFiles/hikvision_ros2_driver.dir/all] Error 2
gmake: *** [Makefile:146: all] Error 2
